git 47e2cc3f0320c807f37a0ec36fb5c2066abe96f5

---

# Шаблонизатор Blade

- [Шаблоны Blade](#blade-templating)
- [Другие директивы Blade](#other-blade-control-structures)
- [Расширение Blade](#extending-blade)

<a name="blade-templating"></a>
## Шаблоны Blade

Blade - простой, но мощный шаблонизатор, входящий в состав Laravel. Blade основан на концепции наследования шаблонов и секциях. Все шаблоны Blade должны иметь расширение `.blade.php`.

#### Создание шаблона Blade

	<!-- resources/views/layouts/master.blade.php -->

	<html>
		<body>
			@section('sidebar')
				Это - главный сайдбар.
			@show

			<div class="container">
				@yield('content')
			</div>
		</body>
	</html>

#### Использование шаблона Blade

	@extends('layouts.master')

	@section('sidebar')
		@parent

		<p>Этот элемент будет добавлен к главному сайдбару.</p>
	@stop

	@section('content')
		<p>Это - содержимое страницы.</p>
	@stop

Заметьте, что шаблоны, которые расширяют другой Blade-шаблон с помощью `extend`, просто перекрывают секции последнего. Старое (перекрытое) содержимое может быть выведено директивой `@@parent`.

Иногда - например, когда вы не уверены, что секция была определена - вам может понадобиться указать значение по умолчанию для директивы `@yield`. Вы можете передать его вторым аргументом:

	@yield('section', 'Default Content')

<a name="other-blade-control-structures"></a>
## Другие директивы Blade

#### Вывод переменной

	Привет, {{ $name }}.

	Текущее время эпохи UNIX: {{ time() }}.

#### Вывод переменной с проверкой на существование

Иногда вам нужно вывести переменную, которая может быть определена, а может быть нет. Например:

	{{ isset($name) ? $name : 'Default' }}

Но вам не обязательно писать тернарный оператор, Blade позволяет записать это короче:

	{{ $name or 'Default' }}

#### Вывод текста с фигурными скобками

Если вам нужно вывести текст с фигурными скобками - управляющими символами Blade - вы можете поставить префикс `@`:

	@{{ Этот текст не будет обрабатываться шаблонизатором Blade }}

По умолчанию весь выводимый контент экранируется, т.е. все элементы и сущности HTML показываются как есть, вместо того, чтобы обрабатываться браузером. Если вы не хотите, что бы данные экранировались, используйте следующий синтаксис: 

	Hello, {!! $name !!}.

> **Примечание:** Будьте осторожны с выводом контента, который получен от пользователей. Всегда используйте двойные фигурные скобки для экранирования возможных элементов и сущностей HTML.

#### Директива If

	@if (count($records) === 1)
		Здесь есть одна запись!
	@elseif (count($records) > 1)
		Здесь есть много записей!
	@else
		Здесь нет записей!
	@endif

	@unless (Auth::check())
		Вы не вошли в систему.
	@endunless

#### Циклы

	@for ($i = 0; $i < 10; $i++)
		Текущее значение: {{ $i }}
	@endfor

	@foreach ($users as $user)
		<p>Это пользователь{{ $user->id }}</p>
	@endforeach

	@forelse($users as $user)
	  	<li>{{ $user->name }}</li>
	@empty
	  	<p>No users</p>
	@endforelse

	@while (true)
		<p>Это будет длиться вечно.</p>
	@endwhile

#### Подшаблоны

	@include('view.name')
	
Вы также можете передать массив переменных во включаемый шаблон:
	
	@include('view.name', ['some'=>'data'])
	
#### Перезапись секций

Для полной перезаписи секции можно использовать директиву `overwrite`:
	
	@extends('list.item.container')

	@section('list.item.content')
		<p>Это - элемент типа {{ $item->type }}</p>
	@overwrite

#### Строки файлов локализации

	@lang('language.line')

	@choice('language.line', 1);

<a name="extending-blade"></a>
## Расширение Blade

Blade позволяет создавать свои управляющие структуры. Компилятор Blade располагает двумя хелперами:
- `createPlainMatcher` используется для директив, не имеющих аргументов, таких, как `@endif` и `@stop`.
- `createMatcher` используется для директив с аргументами.

Вот, например, код, создающий директиву `@datetime($var)` , которая аналогична вызову метода `format()` у переменной `$var`:

	Blade::extend(function($view, $compiler)
	{
		$pattern = $compiler->createMatcher('datetime');

		return preg_replace($pattern, '$1<?php echo $2->format(\'m/d/Y H:i\'); ?>', $view);
	});
